<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SpringBootæ•´åˆMongoDBå’Œéƒ¨åˆ†å¸¸ç”¨æ“ä½œ</title>
      <link href="2021/09/28/springboot-zheng-he-mongodb-he-bu-fen-chang-yong-cao-zuo/"/>
      <url>2021/09/28/springboot-zheng-he-mongodb-he-bu-fen-chang-yong-cao-zuo/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBootæ•´åˆMongoDBå’Œéƒ¨åˆ†å¸¸ç”¨æ“ä½œ"><a href="#SpringBootæ•´åˆMongoDBå’Œéƒ¨åˆ†å¸¸ç”¨æ“ä½œ" class="headerlink" title="SpringBootæ•´åˆMongoDBå’Œéƒ¨åˆ†å¸¸ç”¨æ“ä½œ"></a><strong>SpringBootæ•´åˆMongoDBå’Œéƒ¨åˆ†å¸¸ç”¨æ“ä½œ</strong></h1><h3 id="ä½¿ç”¨MongoTemplateæ–¹å¼"><a href="#ä½¿ç”¨MongoTemplateæ–¹å¼" class="headerlink" title="ä½¿ç”¨MongoTemplateæ–¹å¼"></a><strong>ä½¿ç”¨MongoTemplateæ–¹å¼</strong></h3><h4 id="å®ä½“ç±»"><a href="#å®ä½“ç±»" class="headerlink" title="å®ä½“ç±»:"></a><strong>å®ä½“ç±»:</strong></h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@Document</span><span class="token punctuation">(</span><span class="token string">"student"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Id</span><span class="token comment">//   ä¸»é”®</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> studentId<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> studentName<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> studentAge<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> studentScore<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> studentSex<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Daoæ¥å£éƒ¨åˆ†"><a href="#Daoæ¥å£éƒ¨åˆ†" class="headerlink" title="Daoæ¥å£éƒ¨åˆ†:"></a><strong>Daoæ¥å£éƒ¨åˆ†:</strong></h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentDaoTypeTwo</span> <span class="token punctuation">{</span><span class="token comment">//  å¢åŠ ä¸€ä½å­¦ç”Ÿ</span>  <span class="token keyword">void</span> <span class="token function">addOneStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Daoå®ç°ç±»"><a href="#Daoå®ç°ç±»" class="headerlink" title="Daoå®ç°ç±»:"></a><strong>Daoå®ç°ç±»:</strong></h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentDaoTwoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentDaoTwo</span> <span class="token punctuation">{</span>    <span class="token comment">//ä½¿ç”¨MongoTemplateè¿›è¡Œæ•°æ®åº“æ“ä½œ</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">MongoTemplate</span> mongoTemplate<span class="token punctuation">;</span> <span class="token comment">//å¢åŠ å­¦ç”Ÿ</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>    mongoTemplate<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æµ‹è¯•ç±»"><a href="#æµ‹è¯•ç±»" class="headerlink" title="æµ‹è¯•ç±»:"></a><strong>æµ‹è¯•ç±»:</strong></h4><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">@SpringBootTestpublic class StudentDemoTwoTest {    @Autowired    private StudentDaoTwo studentDaoTwo;    //æ·»åŠ æµ‹è¯•    @Test    public void addStudentTest(){        Student student=new Student();        student.setStudentId("demo2id")                .setStudentName("demo2name")                .setStudentAge(20)                .setStudentScore(98);        studentDaoTwo.addStudent(student);    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¸¸ç”¨æ“ä½œ"><a href="#å¸¸ç”¨æ“ä½œ" class="headerlink" title="å¸¸ç”¨æ“ä½œ:"></a><strong>å¸¸ç”¨æ“ä½œ:</strong></h3><p><strong>å†™åœ¨å®ç°ç±»ä¸­çš„æ–¹æ³•</strong></p><h4 id="ä¿®æ”¹æ“ä½œ"><a href="#ä¿®æ”¹æ“ä½œ" class="headerlink" title="ä¿®æ”¹æ“ä½œ:"></a><strong>ä¿®æ”¹æ“ä½œ:</strong></h4><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">//ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯@Overridepublic void updateStudent(Student student) {    //åˆ¤æ–­æ¡ä»¶    Query query=new Query(Criteria.where("_id").is(student.getStudentId()));    //ä¿®æ”¹ä¿¡æ¯    Update update=new Update();    update.set("studentName",student.getStudentName());    update.set("studentSex",student.getStudentSex());    update.set("studentScore",student.getStudentScore());    mongoTemplate.updateFirst(query,update,Student.class);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="åˆ é™¤æ“ä½œ"><a href="#åˆ é™¤æ“ä½œ" class="headerlink" title="åˆ é™¤æ“ä½œ:"></a><strong>åˆ é™¤æ“ä½œ:</strong></h4><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">//åˆ é™¤å­¦ç”Ÿ@Overridepublic void deleteStudentByStudentId(String studentId) {    Query query=new Query(Criteria.where("_id").is(studentId));    mongoTemplate.remove(query,Student.class);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æŸ¥è¯¢å…¨éƒ¨"><a href="#æŸ¥è¯¢å…¨éƒ¨" class="headerlink" title="æŸ¥è¯¢å…¨éƒ¨:"></a><strong>æŸ¥è¯¢å…¨éƒ¨:</strong></h4><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">//æŸ¥è¯¢å‡ºæ‰€æœ‰å­¦ç”Ÿ@Overridepublic List&lt;Student&gt; getAllStudent() {    return mongoTemplate.findAll(Student.class);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢:"></a><strong>æ¡ä»¶æŸ¥è¯¢:</strong></h4><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">//æ¡ä»¶æŸ¥è¯¢@Overridepublic Student getStudent(Student student) {    Query query=new Query();       //query.addCriteria(Criteria.where("_id").is(student.getStudentId())); //å¯ç´¯åŠ æ¡ä»¶    query.addCriteria(Criteria.where("studentName").is(student.getStudentName()));    query.addCriteria(Criteria.where("studentAge").is(student.getStudentAge()));    return mongoTemplate.findOne(query, Student.class);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢:"></a><strong>æ¨¡ç³ŠæŸ¥è¯¢:</strong></h4><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">//æ¨¡ç³ŠæŸ¥è¯¢@Overridepublic List&lt;Student&gt; getStudentList() {    Query query=new Query();    //Criteria.where("studentName").regex("å¡«å†™åŒ¹é…å­—ç¬¦")    query.addCriteria(Criteria.where("studentName").regex("lijin"));        return mongoTemplate.find(query,Student.class);}//æ¨¡ç³ŠæŸ¥è¯¢é‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æŸ¥è¯¢@Overridepublic List&lt;Student&gt; getStudentList() {    //æ­£åˆ™  nameæ˜¯ä½ éœ€è¦è¾“å…¥çš„æŸ¥è¯¢å€¼    Pattern pattern =Pattern.compile("^.*"+"lijin"+".*$",Pattern.CASE_INSENSITIVE);                                                                                      //åˆ›å»ºæŸ¥è¯¢å¯¹è±¡    Query query = new Query();    //è®¾ç½®æ¨¡ç³ŠæŸ¥è¯¢    query.addCriteria(Criteria.where("studentName").regex(pattern));    return mongoTemplate.find(query, Student.class); }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æŸ¥è¯¢æ¡ä»¶-å¤§äºå°äºï¼Œå¤§äºç­‰äºï¼Œå°äºç­‰äº-éç©º"><a href="#æŸ¥è¯¢æ¡ä»¶-å¤§äºå°äºï¼Œå¤§äºç­‰äºï¼Œå°äºç­‰äº-éç©º" class="headerlink" title="æŸ¥è¯¢æ¡ä»¶: å¤§äºå°äºï¼Œå¤§äºç­‰äºï¼Œå°äºç­‰äº , éç©º"></a><strong>æŸ¥è¯¢æ¡ä»¶: å¤§äºå°äºï¼Œå¤§äºç­‰äºï¼Œå°äºç­‰äº , éç©º</strong></h3><p><strong>å¤§äº: gt()</strong></p><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">query .addCriteria(Criteria.where("studentAge").gt(student.getStudentAge()));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>å°äº: lt()</strong></p><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">query .addCriteria(Criteria.where("studentAge").lt(student.getStudentAge()));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>å¤§äºç­‰äº: gte()</strong></p><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">query .addCriteria(Criteria.where("studentAge").gte(student.getStudentAge()));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>å°äºç­‰äº: lte()</strong></p><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">query .addCriteria(Criteria.where("studentAge").lte(student.getStudentAge()));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>éç©ºæŸ¥è¯¢ ne() ä¸ç­‰äº</strong></p><pre class="line-numbers language-JAVA" data-language="JAVA"><code class="language-JAVA">query .addCriteria(Criteria.where("studentAge").ne("").ne(null));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>in(nin)</strong> <strong>åœ¨(ä¸åœ¨)èŒƒå›´ç±»æŸ¥è¯¢:</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//åœ¨èŒƒå›´ç±»æŸ¥è¯¢   in()ä¸­å¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæƒ³åŒç±»å‹çš„å‚æ•°,ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªé›†åˆ</span>query<span class="token punctuation">.</span><span class="token function">addCriteria</span><span class="token punctuation">(</span><span class="token class-name">Criteria</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>ç»Ÿè®¡æ•°é‡</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Int</span> count<span class="token operator">=</span>mongoTemplate<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h3 id="æ’åºæ“ä½œ"><a href="#æ’åºæ“ä½œ" class="headerlink" title="æ’åºæ“ä½œ"></a><strong>æ’åºæ“ä½œ</strong></h3><h4 id="å•ä¸ªå­—æ®µæ’åº"><a href="#å•ä¸ªå­—æ®µæ’åº" class="headerlink" title="å•ä¸ªå­—æ®µæ’åº:"></a><strong>å•ä¸ªå­—æ®µæ’åº:</strong></h4><pre class="line-numbers language-java" data-language="java"><code class="language-java">query<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">Sort</span><span class="token punctuation">.</span><span class="token function">by</span><span class="token punctuation">(</span><span class="token class-name">Sort<span class="token punctuation">.</span>Direction</span><span class="token punctuation">.</span>ASC<span class="token punctuation">,</span> <span class="token string">"studentAge"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="å¤šä¸ªå­—æ®µæ’åº"><a href="#å¤šä¸ªå­—æ®µæ’åº" class="headerlink" title="å¤šä¸ªå­—æ®µæ’åº:"></a><strong>å¤šä¸ªå­—æ®µæ’åº:</strong></h4><pre class="line-numbers language-java" data-language="java"><code class="language-java">query<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">Sort</span><span class="token punctuation">.</span><span class="token function">by</span><span class="token punctuation">(</span><span class="token class-name">Sort<span class="token punctuation">.</span>Direction</span><span class="token punctuation">.</span>ASC<span class="token punctuation">,</span> <span class="token string">"studentAge"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name">Sort</span><span class="token punctuation">.</span><span class="token function">by</span><span class="token punctuation">(</span><span class="token class-name">Sort<span class="token punctuation">.</span>Direction</span><span class="token punctuation">.</span>ASC<span class="token punctuation">,</span> <span class="token string">"studentScore"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="å¤æ‚æ“ä½œ"><a href="#å¤æ‚æ“ä½œ" class="headerlink" title="å¤æ‚æ“ä½œ:"></a><strong>å¤æ‚æ“ä½œ</strong>:</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Query</span> query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Criteria</span> criteria <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Criteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸‹é¢æ¡ä»¶ç›¸å½“äºselect * from student where studentage in(16,32) and studentSex=â€™ç”·â€™ and student&lt;=80 and (studentGrade =3 or studentGrade =4)</span>criteria<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token string">"studentAge"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">andOperator</span><span class="token punctuation">(</span><span class="token class-name">Criteria</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">"studenSex"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"ç”·"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token string">"studentScore"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lte</span><span class="token punctuation">(</span><span class="token string">"80"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">orOperator</span><span class="token punctuation">(</span><span class="token class-name">Criteria</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">"studentGrade"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"3"</span><span class="token punctuation">)</span>                <span class="token punctuation">,</span><span class="token class-name">Criteria</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">"studentGrade "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"4"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>query<span class="token punctuation">.</span><span class="token function">addCriteria</span><span class="token punctuation">(</span>criteria<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> mongoTemplate<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ†é¡µæŸ¥è¯¢æ“ä½œ"><a href="#åˆ†é¡µæŸ¥è¯¢æ“ä½œ" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢æ“ä½œ:"></a><strong>åˆ†é¡µæŸ¥è¯¢æ“ä½œ:</strong></h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//åˆ†é¡µæ“ä½œ</span><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> <span class="token function">findStudentPage</span><span class="token punctuation">(</span><span class="token class-name">String</span> studentName<span class="token punctuation">,</span> <span class="token keyword">int</span> page <span class="token punctuation">,</span> <span class="token keyword">int</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//åˆ›å»ºæŸ¥è¯¢å¯¹è±¡</span>    <span class="token class-name">Query</span> query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//åˆ†é¡µ</span>    <span class="token class-name">Pageable</span> pageable<span class="token operator">=</span><span class="token class-name">PageRequest</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span>nums<span class="token punctuation">,</span><span class="token class-name">Sort<span class="token punctuation">.</span>Direction</span><span class="token punctuation">.</span>ASC<span class="token punctuation">,</span>studentName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ­£åˆ™</span>    <span class="token class-name">Pattern</span>  pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"^.*"</span><span class="token operator">+</span>studentName<span class="token operator">+</span><span class="token string">".*$"</span><span class="token punctuation">,</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span>CASE_INSENSITIVE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è®¾ç½®æ¨¡ç³ŠæŸ¥è¯¢</span>    query<span class="token punctuation">.</span><span class="token function">addCriteria</span><span class="token punctuation">(</span><span class="token class-name">Criteria</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">"studentName"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">regex</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ’åº</span>    query<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">Sort</span><span class="token punctuation">.</span><span class="token function">by</span><span class="token punctuation">(</span><span class="token class-name">Sort<span class="token punctuation">.</span>Direction</span><span class="token punctuation">.</span>ASC<span class="token punctuation">,</span> <span class="token string">"StudentAge"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è®¾ç½®åˆ†é¡µ</span>    query<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>pageable<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æŸ¥è¯¢å½“å‰é¡µæ•°æ®é›†åˆ</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> studentList <span class="token operator">=</span> mongoTemplate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token operator">:</span>studentList<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"!!!!!!!!!!!!!!!!!!!!!!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//æŸ¥è¯¢æ€»è®°å½•æ•°</span>    <span class="token class-name">Long</span> count<span class="token operator">=</span>mongoTemplate<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span><span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> studentList<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="/2021/09/28/springboot-zheng-he-mongodb-he-bu-fen-chang-yong-cao-zuo/4.jpg" width="70%" height="70%">]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> MongoDB </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaé›†åˆMapå’ŒHashMap</title>
      <link href="2021/07/15/java-ji-he-map-he-hashmap/"/>
      <url>2021/07/15/java-ji-he-map-he-hashmap/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>äº”ä¸€ä¹‹è¡Œ</title>
      <link href="2021/05/12/wu-yi-zhi-xing/"/>
      <url>2021/05/12/wu-yi-zhi-xing/</url>
      
        <content type="html"><![CDATA[<h1 id="äº”ä¸€ä¹‹è¡Œ"><a href="#äº”ä¸€ä¹‹è¡Œ" class="headerlink" title="äº”ä¸€ä¹‹è¡Œ"></a>äº”ä¸€ä¹‹è¡Œ</h1><h2 id="å‡ºè¡Œè®¡åˆ’"><a href="#å‡ºè¡Œè®¡åˆ’" class="headerlink" title="å‡ºè¡Œè®¡åˆ’"></a>å‡ºè¡Œè®¡åˆ’</h2><table><thead><tr><th align="left">æ—¶é—´</th><th align="left">ä¸Šåˆ</th><th>ä¸‹åˆ</th><th>æ™šä¸Š</th></tr></thead><tbody><tr><td align="left">äº”æœˆä¸€å·</td><td align="left">ä¸Šæµ·é‡ç”ŸåŠ¨ç‰©å›­</td><td></td><td>åˆ°è¾¾å—äº¬</td></tr><tr><td align="left">äº”æœˆäºŒå·</td><td align="left">ç„æ­¦æ¹–å…¬å›­</td><td>é’Ÿå±±é£æ™¯åŒº</td><td>éšä¾¿é€›é€›</td></tr><tr><td align="left">äº”æœˆä¸‰å·</td><td align="left">ä¾µåæ—¥å†›å¤§å± æ€çºªå¿µé¦†</td><td>å¤«å­åº™</td><td>è€ä¸œé—¨</td></tr><tr><td align="left">äº”æœˆå››å·</td><td align="left">è¿”å›ä¸Šæµ·</td><td>å—äº¬ä¸œè·¯</td><td>æ—¶ä»£å¤–æ»©</td></tr><tr><td align="left">äº”æœˆäº”å·</td><td align="left">ç¡è§‰</td><td>å‰å¾€æœºåœº</td><td></td></tr></tbody></table><h2 id="äº”æœˆä¸€å·"><a href="#äº”æœˆä¸€å·" class="headerlink" title="äº”æœˆä¸€å·"></a>äº”æœˆä¸€å·</h2><p>ä¸€æ—©å‡ºå‘å‰å¾€é‡ç”ŸåŠ¨ç‰©å›­ï¼Œå¯„å­˜å¥½è¡Œæåè¿›å…¥åŠ¨ç‰©å›­ï¼Œå…¥å£å³ä¾§çš„é¸½å­åŒº~~å’•å’•å’•å’•</p><img src="/2021/05/12/wu-yi-zhi-xing/34.jpg" width="70%" height="70%"><p>é•¿å˜´å·´çš„é£Ÿèšå…½<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/35.jpg" width="70%" height="70%"><p>éšå¤„å¯è§çš„å¤©é¹…</p><img src="/2021/05/12/wu-yi-zhi-xing/36.jpg" width="70%" height="70%"><p>ç¡åˆè§‰çš„ç‹çŒ´ä¸€å®¶</p><img src="/2021/05/12/wu-yi-zhi-xing/37.jpg" width="70%" height="70%"><p> çœ‹èµ·æ¥ä¸æ˜¯å¾ˆèªæ˜çš„é¹¦é¹‰</p><img src="/2021/05/12/wu-yi-zhi-xing/38.jpg" width="70%" height="70%"><p>å¤§ç†ŠçŒ«ç¨€å°‘çš„åŸå› <span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/40.jpg" width="70%" height="70%"><p>è‚¥æˆçƒçš„æµ£ç†Š</p><img src="/2021/05/12/wu-yi-zhi-xing/41.jpg" width="70%" height="70%"><p>ä¸Šæµ·é‡ç”ŸåŠ¨ç‰©å›­è¿˜æ˜¯å¾ˆå¥½ç©ï¼ŒåŠ¨ç‰©å¤§éƒ½å¯ä»¥è¿‘è·ç¦»è§‚çœ‹ï¼Œè¿˜æœ‰å¾ˆå¤šåŠ¨ç‰©åŒºå¯ä»¥æŠ•å–‚ï¼ŒåŠ¨ç‰©çš„çŠ¶æ€ä¹Ÿå¾ˆå¥½ï¼Œåªæ˜¯åˆ°åŠ¨ç‰©å›­çš„æ—¶å€™æ­£å¥½ä¸­åˆï¼Œå¾ˆå¤šåŠ¨ç‰©éƒ½åœ¨ç¡åˆè§‰<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>æ™šä¸Šå°±ä»ä¸Šæµ·åé«˜é“åˆ°å—äº¬</p><p>æŠŠä¸œè¥¿æ”¾é…’åº—å°±å‡ºå»åƒä¸œè¥¿ï¼Œé…’åº—é™„è¿‘æœ‰å®¶æ¸…çœŸçƒ§çƒ¤åº—ï¼Œå‘³é“ä¸é”™ï¼Œä»·æ ¼æœ‰ç‚¹å°è´µã€‚</p><img src="/2021/05/12/wu-yi-zhi-xing/1.jpg" width="70%" height="70%"><h2 id="äº”æœˆäºŒå·"><a href="#äº”æœˆäºŒå·" class="headerlink" title="äº”æœˆäºŒå·"></a>äº”æœˆäºŒå·</h2><p>â€‹        æ—©ä¸Šå‡ºé—¨åƒç‚¹æ—©é¤å°±å»ç„æ­¦æ¹–å…¬å›­ï¼Œè¿›å…¥å…¬å›­å…¥å£åï¼Œé€šè¿‡ä¸€æ®µé•¿æ¡¥ä¸Šäº†ç¯æ´²ï¼Œ<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/2.jpg" width="70%" height="70%"><p>ç¯æ´²å’Œæ¨±æ´²ä¹‹é—´å¤¹ç€ä¸€æ¡å°æ²³ï¼Œæœ‰å¾ˆå¤šæ¸¸å®¢åœ¨æ²³ä¸­åˆ’çš®åˆ’è‰‡ï¼Œ</p><img src="/2021/05/12/wu-yi-zhi-xing/3.jpg" width="70%" height="70%"><img src="/2021/05/12/wu-yi-zhi-xing/4.jpg" width="70%" height="70%"><p>å›´ç€é€›ä¸€åœˆåé€šè¿‡çŸ³æ¡¥èµ°ä¸Šæ¨±æ´²ï¼Œå²›ä¸Šå››å¤„é€›é€›ååˆé€šè¿‡èŠ³æ¡¥åˆ°äº†ç²±æ´²ï¼Œ</p><img src="/2021/05/12/wu-yi-zhi-xing/5.jpg" width="70%" height="70%"><p>â€‹    å²›ä¸Šå¾ˆå¤šå¤§æ ‘ï¼Œé€ å‹å¥‡ç‰¹ï¼Œ</p><img src="/2021/05/12/wu-yi-zhi-xing/6.jpg" width="70%" height="70%"><p>ä¸€é—´ä¹¦å±‹</p><img src="/2021/05/12/wu-yi-zhi-xing/7.jpg" width="70%" height="70%"><p>ä»ç²±æ´²åé¢ç»è¿‡ç›†æ™¯å›­ï¼Œä¸Šæ¡¥èµ°å»ç¿ æ´²</p><img src="/2021/05/12/wu-yi-zhi-xing/8.jpg" width="70%" height="70%"><img src="/2021/05/12/wu-yi-zhi-xing/9.jpg" width="70%" height="70%"><p>çœ‹è§ç¿ æ´²ä¸­æœ‰é²¤é±¼å¡˜ä¾¿ä¹°åŒ…é±¼é¥µæƒ³å–‚å–‚é²¤é±¼ï¼Œå¯æƒœæ± è¾¹äººå¤ªå¤šã€‚å†ç»è¿‡èµ°å‡ºç¿ æ´²ä¸€è·¯å‘ä¸œèµ°è¿›ç„æ­¦æ¹–ä¸œåŒ—å²¸çš„æƒ…ä¾£å›­ã€‚<span class="github-emoji"><span>ğŸ¤</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f424.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ¤</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f424.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/10.jpg" width="70%" height="70%"><p>èµ°å‡ºç„æ­¦æ¹–å…¬å›­åï¼Œå¤ªç´¯äº†ä¸´æ—¶å†³å®šæ”¹å˜è®¡åˆ’ï¼Œä»Šæ™šå»å¤«å­åº™æ­¥è¡Œè¡—ï¼Œæ˜å¤©å†å»é’Ÿå±±é£æ™¯åŒºã€‚</p><p>è§£å†³è‚šå­é¥¿åå°±æ…¢æ…¢æ­¥è¡Œå»å¤«å­åº™ã€‚<span class="github-emoji"><span>ğŸ˜‹</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60b.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜‹</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60b.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/11.jpg" width="70%" height="70%"><p><span class="github-emoji"><span>ğŸ±</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f431.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ±</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f431.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/15.jpg" width="70%" height="70%"><p>é€”å¾„ä¸€å¤„å•†åŸï¼Œ</p><img src="/2021/05/12/wu-yi-zhi-xing/12.jpg" width="50%" height="50%"><p>å¤«å­åº™å…¥å£å¯¹é¢ï¼ŒäººæŒ¤äºº~~~~<span class="github-emoji"><span>ğŸ˜­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/13.jpg" width="70%" height="70%"><p>æŒ¤åˆ°ç§¦æ·®æ²³è¾¹ï¼Œå®åœ¨æ˜¯æŒ¤ä¸è¿‡å»<span class="github-emoji"><span>ğŸ˜©</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f629.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜©</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f629.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>ä¸æƒ³èµ°äº†å°±é¡ºç€äººç¾¤å¾€å‡ºå£èµ°å»ï¼Œèµ°å‡ºå‡ºå£åå›å¤´æ‹ä¸€å¼ ã€‚</p><img src="/2021/05/12/wu-yi-zhi-xing/14.jpg" width="70%" height="70%"><p>ç»“æŸä»Šå¤©ï¼Œå›é…’åº—ä¼‘æ¯ã€‚</p><h2 id="äº”æœˆä¸‰å·"><a href="#äº”æœˆä¸‰å·" class="headerlink" title="äº”æœˆä¸‰å·"></a>äº”æœˆä¸‰å·</h2><p>ä¹‹å‰è®¡åˆ’å»å¤§å± æ€çºªå¿µé¦†æ—¶ï¼Œåœ¨æ‰‹æœºä¸Šä¸€ç›´æ²¡æ‰¾åˆ°é¢„çº¦é€”å¾„ï¼Œä¸‰å·æ—©ä¸Šé†’æ¥åçªç„¶æƒ³åˆ°è¯•è¯•å¾®ä¿¡ä¸Šæœæœå®˜æ–¹å…¬ä¼—åï¼Œå‘ç°æœ‰å®˜æ–¹å¾®ä¿¡å…¬ä¼—å·å¯ä»¥é¢„å®šï¼Œå¯æƒœï¼Œäº”ä¸€æœŸé—´çš„æ—©å·²ç»è¢«é¢„çº¦æ»¡äº†ï¼Œè¿™æ¬¡åº”è¯¥å»ä¸æˆäº†ã€‚<span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>äºŒå·èµ¶åœ°é“æ—¶ç»è¿‡äº†çºªå¿µé¦†æ—è¾¹çš„ä¸€ä¸ªåœ°é“ç«™ï¼Œåªä»è¿œå¤„è§‚æœ›äº†ä¸‹ã€‚</p><p>äºæ˜¯å†³å®šä»Šå¤©å°±åªå»é’Ÿå±±é£æ™¯åŒºï¼Œ</p><p>ä¸­åˆæ‰¾äº†å®¶è¿é”å·èœåº—ï¼Œå‘³é“æå¥½ï¼Œ<span class="github-emoji"><span>ğŸ˜‹</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60b.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼Œåƒåˆé¥­åå°±å‰å¾€é’Ÿå±±æ™¯åŒºã€‚</p><p>ç”±äºäºŒå·èµ°å¾—å®åœ¨æ˜¯å¤ªä¹…ï¼Œåˆšèµ°è¿›æ™¯åŒºæ—¶å°±åˆæœ‰äº›ç´¯äº†ï¼Œ<span class="github-emoji"><span>ğŸ˜…</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜…</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>æ¸¸ç©çš„æ—¶å€™å°±èµ°èµ°åœåœï¼Œæ„Ÿè§‰ä¹Ÿååˆ†ä¸é”™ã€‚</p><img src="/2021/05/12/wu-yi-zhi-xing/16.jpg" width="70%" height="70%"><p>çœ‹è¿‡åœ°å›¾åå†³å®šå…ˆå»æ˜å­é™µï¼Œä¾¿é¡ºç€æ˜å­é™µçš„æ–¹å‘èµ°å»ï¼Œ</p><img src="/2021/05/12/wu-yi-zhi-xing/17.jpg" width="70%" height="70%"><p>å¤§è·¯äººå¤šï¼Œå¤§è·¯æ—çš„å°å¾„äººå¾ˆå°‘ï¼Œéšç€å°è·¯èµ°æ„Ÿè§‰ååˆ†æƒ¬æ„ã€‚</p><img src="/2021/05/12/wu-yi-zhi-xing/18.jpg" width="70%" height="70%"><img src="/2021/05/12/wu-yi-zhi-xing/19.jpg" width="70%" height="70%"><p>æ–‡æ­¦æ–¹é—¨</p><img src="/2021/05/12/wu-yi-zhi-xing/20.jpg" width="70%" height="70%"><p>è¿›å…¥æ–‡æ­¦æ–¹é—¨ååŒ†åŒ†é€›äº†é€›ï¼Œå‡ºæ¥åå·²ç»ååˆ†ç–²æƒ«ï¼Œæ—¶é—´ä¹Ÿä¸æ—©äº†ï¼Œæœ€åå†³å®šåœ¨å»æ˜å­é™µåé¢çš„ç´«éœæ¹–çœ‹çœ‹å°±ç»“æŸæ­¤è¡Œã€‚</p><p>åŸè·¯å‡ºæ¥åï¼Œä»æ—è¾¹ä¸€æ¡å²”è·¯èµ°å»ç´«éœæ¹–ã€‚</p><img src="/2021/05/12/wu-yi-zhi-xing/21.jpg" width="50%" height="50%"><p>æœ‰ç§æ›²å¾„é€šå¹½å¤„çš„æ„Ÿè§‰ï¼Œå‘ä¸Šèµ°äº†ä¸€ä¸¤ç™¾ç±³åï¼Œè±ç„¶å¼€æœ—ï¼ŒåŠå±±è…°çš„ç´«éœæ¹–æ˜ å…¥çœ¼å¸˜ï¼Œçœ‹åˆ°è¿™èˆ¬æ™¯è‰²é¡¿æ—¶è§‰å¾—ä¸è™šæ­¤è¡Œäº†ã€‚<span class="github-emoji"><span>ğŸ˜²</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f632.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜²</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f632.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/22.jpg" width="70%" height="70%"><p>æ¹–æ°´ååˆ†æ¸…æ¾ˆï¼Œ<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/23.jpg" width="70%" height="70%"><img src="/2021/05/12/wu-yi-zhi-xing/24.jpg" width="70%" height="70%"><img src="/2021/05/12/wu-yi-zhi-xing/27.jpg" width="70%" height="70%"><p>æ¹–è¾¹ç¨ä½œä¼‘æ¯ï¼Œå›´ç€æ¹–æ…¢æ…¢èµ°äº†ä¸€å‘¨ã€‚</p><p>è¿œå¤„çš„ç¼†è½¦ï¼Œ</p><img src="/2021/05/12/wu-yi-zhi-xing/25.jpg" width="70%" height="70%"><p>â€å¤©æ± â€œ</p><img src="/2021/05/12/wu-yi-zhi-xing/26.jpg" width="70%" height="70%"><p>å¤ªæ£’äº†å¤ªæ£’äº†<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>æœ€åç¦»å¼€ç´«éœæ¹–åå°±ç»“æŸäº†ä»Šå¤©çš„è¡Œç¨‹ã€‚</p><h2 id="äº”æœˆå››å·"><a href="#äº”æœˆå››å·" class="headerlink" title="äº”æœˆå››å·"></a>äº”æœˆå››å·</h2><p>äº”æœˆå››å·ä¸Šåˆç¦»å¼€äº†å—äº¬ï¼Œè¿”å›ä¸Šæµ·åæ”¾ç½®å¥½è¡Œæåå°±å‰å¾€å—äº¬ä¸œè·¯æ­¥è¡Œè¡—ï¼Œäººè™½ç„¶å¤šä½†å´ä¸æ‹¥æŒ¤</p><img src="/2021/05/12/wu-yi-zhi-xing/28.jpg" width="50%" height="50%"><p>é¡ºç€å—äº¬ä¸œè·¯èµ°å‘æ—¶ä»£å¤–æ»©ï¼Œæƒ³çœ‹çœ‹æ—¶ä»£å¤–æ»©çš„å¤œæ™¯ï¼Œ</p><img src="/2021/05/12/wu-yi-zhi-xing/29.jpg" width="70%" height="70%"><p>æ¥å¾—æœ‰äº›æ—©ï¼Œåœ¨æ±Ÿè¾¹é¡¶ç€æ±Ÿé£ç­‰ç€å¤©é»‘ï¼Œå¤©è¿˜ä¸‹ç€æ¯›æ¯›é›¨ã€‚ã€‚ã€‚ã€‚<span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/30.jpg" width="70%" height="70%"><img src="/2021/05/12/wu-yi-zhi-xing/31.jpg" width="70%" height="70%"><p>ç­‰åˆ°å¤©å®Œå…¨é»‘å~~~~<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="/2021/05/12/wu-yi-zhi-xing/32.jpg" width="70%" height="70%"><p>çœ‹å®Œç¯å…‰è¡¨æ¼”åå°±é¡ºç€å—äº¬ä¸œè·¯æ…¢æ…¢èµ°å›å»äº†ï¼Œæœ€åå†çœ‹çœ‹å—äº¬ä¸œè·¯çš„å¤œæ™¯ã€‚</p><img src="/2021/05/12/wu-yi-zhi-xing/33.jpg" width="70%" height="70%"><h2 id="äº”æœˆäº”å·"><a href="#äº”æœˆäº”å·" class="headerlink" title="äº”æœˆäº”å·"></a>äº”æœˆäº”å·</h2><p>äº”ä¸€æœ€åä¸€å¤©ï¼Œç¡ä¸ªæ‡’è§‰ï¼Œèµ·åºŠååƒè¿‡åˆé¥­ï¼Œä¾¿ç¦»å¼€ä¸Šæµ·åé£æœºè¿”å›å­¦æ ¡å»äº†ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™æ¬¡äº”ä¸€ä¹‹è¡Œç›¸å½“å……å®ï¼Œå”¯ä¸€é—æ†¾çš„å°±æ˜¯æ²¡å»æˆå¤§å± æ€çºªå¿µé¦†ï¼Œä¸‹æ¬¡å†åˆ°å—äº¬ä¸çŸ¥æ˜¯ä»€ä¹ˆæ—¶å€™äº†ï¼Œå¯æƒœã€‚</p><p>è®¡åˆ’é€›é’Ÿå±±æ™¯åŒºçš„æ—¶å€™ä¹°äº†æ™¯åŒºä¸­è¿˜å‡ ä¸ªæ™¯ç‚¹çš„é—¨ç¥¨ï¼Œç»“æœåªå»äº†æ˜å­é™µä¸€ä¸ª<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼Œé’Ÿå±±æ™¯åŒºçš„ä¸‰åˆ†ä¹‹ä¸€éƒ½æ²¡é€›å®Œï¼Œçœ¼ç›å¤§è‚šçš®å°äº†<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
            <tag> æ—…è¡Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis(ä¸€)â€”â€”â€”â€”åˆ†é¡µ</title>
      <link href="2021/05/10/mybatis-yi-fen-ye/"/>
      <url>2021/05/10/mybatis-yi-fen-ye/</url>
      
        <content type="html"><![CDATA[<h3 id="åˆ†é¡µçš„å‡ ç§æ–¹å¼"><a href="#åˆ†é¡µçš„å‡ ç§æ–¹å¼" class="headerlink" title="åˆ†é¡µçš„å‡ ç§æ–¹å¼"></a>åˆ†é¡µçš„å‡ ç§æ–¹å¼</h3><h4 id="ä¸€ã€limitå®ç°åˆ†é¡µ"><a href="#ä¸€ã€limitå®ç°åˆ†é¡µ" class="headerlink" title="ä¸€ã€limitå®ç°åˆ†é¡µ"></a>ä¸€ã€limitå®ç°åˆ†é¡µ</h4><p>â€‹        åœ¨å­¦ä¹ mybatisç­‰æŒä¹…å±‚æ¡†æ¶çš„æ—¶å€™ï¼Œä¼šç»å¸¸å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œä½¿ç”¨æœ€å¤šçš„æ˜¯å¯¹æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œå¦‚æœæŸ¥è¯¢å¤§é‡æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€ä½¿ç”¨åˆ†é¡µè¿›è¡ŒæŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡å¤„ç†å°éƒ¨åˆ†æ•°æ®ï¼Œè¿™æ ·å¯¹æ•°æ®åº“å‹åŠ›å°±åœ¨å¯æ§èŒƒå›´å†…ã€‚</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">#è¯­æ³•</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">LIMIT</span> stratIndexï¼ŒpageSize<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">LIMIT</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// æ£€ç´¢è®°å½•è¡Œ 6-15  </span><span class="token comment">#ä¸ºäº†æ£€ç´¢ä»æŸä¸€ä¸ªåç§»é‡åˆ°è®°å½•é›†çš„ç»“æŸæ‰€æœ‰çš„è®°å½•è¡Œï¼Œå¯ä»¥æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ä¸º -1ï¼š   </span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">LIMIT</span> <span class="token number">95</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// æ£€ç´¢è®°å½•è¡Œ 96-last.  </span><span class="token comment">#å¦‚æœåªç»™å®šä¸€ä¸ªå‚æ•°ï¼Œå®ƒè¡¨ç¤ºè¿”å›æœ€å¤§çš„è®°å½•è¡Œæ•°ç›®ï¼š   </span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">LIMIT</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//æ£€ç´¢å‰ 5 ä¸ªè®°å½•è¡Œ  </span><span class="token comment">#æ¢å¥è¯è¯´ï¼ŒLIMIT n ç­‰ä»·äº LIMIT 0,nã€‚ </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="æ­¥éª¤ï¼š"><a href="#æ­¥éª¤ï¼š" class="headerlink" title="æ­¥éª¤ï¼š"></a>æ­¥éª¤ï¼š</h5><p>1ã€ä¿®æ”¹Mapperæ–‡ä»¶</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectUser<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  select * from user limit #{startIndex},#{pageSize}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>2ã€Mapperæ¥å£ï¼Œå‚æ•°ä¸ºmap</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">//é€‰æ‹©å…¨éƒ¨ç”¨æˆ·å®ç°åˆ†é¡µList<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>User</span><span class="token punctuation">&gt;</span></span> selectUser(Map<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String,Integer</span><span class="token punctuation">&gt;</span></span> map);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>3ã€åœ¨æµ‹è¯•ç±»ä¸­ä¼ å…¥å‚æ•°æµ‹è¯•</p><ul><li>æ¨æ–­ï¼šèµ·å§‹ä½ç½® =  ï¼ˆå½“å‰é¡µé¢ - 1 ï¼‰ * é¡µé¢å¤§å°</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//åˆ†é¡µæŸ¥è¯¢ , ä¸¤ä¸ªå‚æ•°startIndex , pageSize</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token class-name">SqlSession</span> session <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> currentPage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">//ç¬¬å‡ é¡µ</span>   <span class="token keyword">int</span> pageSize <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">//æ¯é¡µæ˜¾ç¤ºå‡ ä¸ª</span>   <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"startIndex"</span><span class="token punctuation">,</span><span class="token punctuation">(</span>currentPage<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>   map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"pageSize"</span><span class="token punctuation">,</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectUser</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token operator">:</span> users<span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>   session<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="äºŒã€RowBoundsåˆ†é¡µ"><a href="#äºŒã€RowBoundsåˆ†é¡µ" class="headerlink" title="äºŒã€RowBoundsåˆ†é¡µ"></a>äºŒã€RowBoundsåˆ†é¡µ</h4><p>â€‹        é™¤äº†ä½¿ç”¨Limitåœ¨SQLå±‚é¢å®ç°åˆ†é¡µï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨RowBoundsåœ¨Javaä»£ç å±‚é¢å®ç°åˆ†é¡µï¼Œå½“ç„¶æ­¤ç§æ–¹å¼ä½œä¸ºäº†è§£å³å¯ã€‚</p><h5 id="æ­¥éª¤ï¼š-1"><a href="#æ­¥éª¤ï¼š-1" class="headerlink" title="æ­¥éª¤ï¼š"></a>æ­¥éª¤ï¼š</h5><p>1ã€mapperæ¥å£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//é€‰æ‹©å…¨éƒ¨ç”¨æˆ·RowBoundså®ç°åˆ†é¡µ</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserByRowBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>2ã€mapperæ–‡ä»¶</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserByRowBounds<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>select * from user<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>3ã€æµ‹è¯•ç±»</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨RowBoundsç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUserByRowBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token class-name">SqlSession</span> session <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">int</span> currentPage <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">//ç¬¬å‡ é¡µ</span>   <span class="token keyword">int</span> pageSize <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">//æ¯é¡µæ˜¾ç¤ºå‡ ä¸ª</span>   <span class="token class-name">RowBounds</span> rowBounds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RowBounds</span><span class="token punctuation">(</span><span class="token punctuation">(</span>currentPage<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>pageSize<span class="token punctuation">,</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//é€šè¿‡session.**æ–¹æ³•è¿›è¡Œä¼ é€’rowBoundsï¼Œ[æ­¤ç§æ–¹å¼ä¸æ¨èä½¿ç”¨]</span>   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">"com.kuang.mapper.UserMapper.getUserByRowBounds"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token operator">:</span> users<span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>   session<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ä¸‰ã€PageHelperåˆ†é¡µ"><a href="#ä¸‰ã€PageHelperåˆ†é¡µ" class="headerlink" title="ä¸‰ã€PageHelperåˆ†é¡µ"></a>ä¸‰ã€PageHelperåˆ†é¡µ</h4><p>ä½¿ç”¨mybatisåˆ†é¡µæ’ä»¶PageHelper</p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pagehelper.github.io/">https://pagehelper.github.io/</a></p><img src="/2021/05/10/mybatis-yi-fen-ye/0.jpg" width="320" height="240">]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> Mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tupian</title>
      <link href="2021/05/10/tupian/"/>
      <url>2021/05/10/tupian/</url>
      
        <content type="html"><![CDATA[<p><img src="/2021/05/10/tupian/1.jpg" alt="å°é¢"></p><img src="/2021/05/10/tupian/1.jpg" width="200" height="300"><img src="/2021/05/10/tupian/3.jpg" width="200" height="300">]]></content>
      
      
      
        <tags>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring(ä¸€)â€”â€”â€”â€”äº‹åŠ¡</title>
      <link href="2021/05/08/spring-yi-shi-wu/"/>
      <url>2021/05/08/spring-yi-shi-wu/</url>
      
        <content type="html"><![CDATA[<h2 id="Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶"><a href="#Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶" class="headerlink" title="Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶"></a>Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶</h2><h3 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ</h3><p>â€‹        äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œæœ€åŸºæœ¬å•å…ƒï¼Œé€»è¾‘ä¸Šä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥æ‰€æœ‰æ“ ä½œéƒ½å¤±è´¥</p><h4 id="å…¸å‹åœºæ™¯ï¼šé“¶è¡Œè½¬è´¦"><a href="#å…¸å‹åœºæ™¯ï¼šé“¶è¡Œè½¬è´¦" class="headerlink" title="å…¸å‹åœºæ™¯ï¼šé“¶è¡Œè½¬è´¦"></a>å…¸å‹åœºæ™¯ï¼š<strong>é“¶è¡Œè½¬è´¦</strong></h4><p>lucy è½¬è´¦ 100 å…ƒ ç»™ mary </p><p>lucy å°‘ 100ï¼Œmary å¤š 100ã€‚</p><h5 id="1-åˆ›å»ºæ•°æ®åº“ï¼Œæ·»åŠ è®°å½•"><a href="#1-åˆ›å»ºæ•°æ®åº“ï¼Œæ·»åŠ è®°å½•" class="headerlink" title="1.åˆ›å»ºæ•°æ®åº“ï¼Œæ·»åŠ è®°å½•"></a>1.åˆ›å»ºæ•°æ®åº“ï¼Œæ·»åŠ è®°å½•</h5><img src="/2021/05/08/spring-yi-shi-wu/æ•°æ®åº“1.png" width="70%" height="70%"><h5 id="2ã€åˆ›å»º-serviceï¼Œæ­å»º-daoï¼Œå®Œæˆå¯¹è±¡åˆ›å»ºå’Œæ³¨å…¥å…³ç³»"><a href="#2ã€åˆ›å»º-serviceï¼Œæ­å»º-daoï¼Œå®Œæˆå¯¹è±¡åˆ›å»ºå’Œæ³¨å…¥å…³ç³»" class="headerlink" title="2ã€åˆ›å»º serviceï¼Œæ­å»º daoï¼Œå®Œæˆå¯¹è±¡åˆ›å»ºå’Œæ³¨å…¥å…³ç³»"></a>2ã€åˆ›å»º serviceï¼Œæ­å»º daoï¼Œå®Œæˆå¯¹è±¡åˆ›å»ºå’Œæ³¨å…¥å…³ç³»</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//service æ³¨å…¥ daoï¼Œåœ¨ dao æ³¨å…¥ JdbcTemplateï¼Œåœ¨ JdbcTemplate æ³¨å…¥ DataSource</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span> <span class="token comment">//æ³¨å…¥ dao</span> <span class="token annotation punctuation">@Autowired</span> <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span> <span class="token annotation punctuation">@Autowired</span> <span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="3ã€åœ¨-dao-åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼š"><a href="#3ã€åœ¨-dao-åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼š" class="headerlink" title="3ã€åœ¨ dao åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼š"></a>3ã€åœ¨ dao åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼š</h5><p>å¤šé’±å’Œå°‘é’±çš„æ–¹æ³•ï¼Œåœ¨ service åˆ›å»ºæ–¹æ³•ï¼ˆè½¬è´¦çš„æ–¹æ³•ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span> <span class="token annotation punctuation">@Autowired</span> <span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">;</span> <span class="token comment">//lucy è½¬è´¦ 100 ç»™ mary</span> <span class="token comment">//å°‘é’±</span> <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reduceMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update t_account set money=money-? where username=?"</span><span class="token punctuation">;</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">"lucy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">//å¤šé’±</span> <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update t_account set money=money+? where username=?"</span><span class="token punctuation">;</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">"mary"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span> <span class="token comment">//æ³¨å…¥ dao</span> <span class="token annotation punctuation">@Autowired</span> <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span> <span class="token comment">//è½¬è´¦çš„æ–¹æ³•</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accountMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//lucy å°‘ 100</span> userDao<span class="token punctuation">.</span><span class="token function">reduceMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//mary å¤š 100</span> userDao<span class="token punctuation">.</span><span class="token function">addMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="4ã€ä¸Šé¢ä»£ç ï¼Œå¦‚æœæ­£å¸¸æ‰§è¡Œæ²¡æœ‰é—®é¢˜çš„"><a href="#4ã€ä¸Šé¢ä»£ç ï¼Œå¦‚æœæ­£å¸¸æ‰§è¡Œæ²¡æœ‰é—®é¢˜çš„" class="headerlink" title="4ã€ä¸Šé¢ä»£ç ï¼Œå¦‚æœæ­£å¸¸æ‰§è¡Œæ²¡æœ‰é—®é¢˜çš„"></a>4ã€ä¸Šé¢ä»£ç ï¼Œå¦‚æœæ­£å¸¸æ‰§è¡Œæ²¡æœ‰é—®é¢˜çš„</h5><p>ä½†æ˜¯å¦‚æœä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œæœ‰é—®é¢˜,å¦‚æ‰§è¡Œå‡å°‘100åå‡ºç°å¼‚å¸¸ï¼Œæ²¡æœ‰å†æ‰§è¡Œå¢åŠ 100çš„æ–¹æ³•ï¼Œå¦‚å›¾ï¼š</p><img src="/2021/05/08/spring-yi-shi-wu/æ¨¡æ‹Ÿå¼‚å¸¸.png" width="70%" height="70%"><p>è¿™æ—¶å€™éœ€è¦ç”¨äº‹åŠ¡è§£å†³ï¼Œ</p><p>äº‹åŠ¡æ“ä½œè¿‡ç¨‹ï¼š</p><p>ï¼ˆ1ï¼‰å¼€å¯äº‹åŠ¡</p><p>ï¼ˆ2ï¼‰è¿›è¡Œäº‹åŠ¡æ“ä½œ</p><p>ï¼ˆ3ï¼‰æ²¡æœ‰å¼‚å¸¸æ—¶æäº¤äº‹åŠ¡å®Œæˆ</p><p>ï¼ˆ4ï¼‰å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œè¿›è¡Œäº‹åŠ¡å›æ»šã€‚</p><h5 id="5ã€äº‹åŠ¡æ“ä½œï¼ˆæ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼‰"><a href="#5ã€äº‹åŠ¡æ“ä½œï¼ˆæ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼‰" class="headerlink" title="5ã€äº‹åŠ¡æ“ä½œï¼ˆæ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼‰"></a>5ã€äº‹åŠ¡æ“ä½œï¼ˆæ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼‰</h5><p>1ã€åœ¨ spring é…ç½®æ–‡ä»¶é…ç½®äº‹åŠ¡ç®¡ç†å™¨   </p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--æ³¨å…¥æ•°æ®æº--&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2ã€åœ¨ spring é…ç½®æ–‡ä»¶ï¼Œå¼€å¯äº‹åŠ¡æ³¨è§£ </p><p>ï¼ˆ1ï¼‰åœ¨ spring é…ç½®æ–‡ä»¶å¼•å…¥åç§°ç©ºé—´ tx</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>  <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>  <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>  <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/aop<span class="token punctuation">"</span></span>  <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/tx<span class="token punctuation">"</span></span>  <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd  http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd  http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰å¼€å¯äº‹åŠ¡æ³¨è§£</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--å¼€å¯äº‹åŠ¡æ³¨è§£--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>3ã€åœ¨ service ç±»ä¸Šé¢ï¼ˆæˆ–è€… service ç±»é‡Œé¢æ–¹æ³•ä¸Šé¢ï¼‰æ·»åŠ äº‹åŠ¡æ³¨è§£ </p><p>ï¼ˆ1ï¼‰@Transactionalï¼Œè¿™ä¸ªæ³¨è§£æ·»åŠ åˆ°ç±»ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ–¹æ³•ä¸Šé¢ </p><p>ï¼ˆ2ï¼‰å¦‚æœæŠŠè¿™ä¸ªæ³¨è§£æ·»åŠ ç±»ä¸Šé¢ï¼Œè¿™ä¸ªç±»é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•éƒ½æ·»åŠ äº‹åŠ¡ </p><p>ï¼ˆ3ï¼‰å¦‚æœæŠŠè¿™ä¸ªæ³¨è§£æ·»åŠ æ–¹æ³•ä¸Šé¢ï¼Œä¸ºè¿™ä¸ªæ–¹æ³•æ·»åŠ äº‹åŠ¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token annotation punctuation">@Transactional</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·ï¼Œåœ¨å‘ç”Ÿå¼‚å¸¸åå°±å¯ä»¥å°†å·²æ‰§è¡Œçš„æ“ä½œå›æ»šï¼Œè¿”å›è‡³æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚</p><h3 id="äº‹åŠ¡çš„ç‰¹æ€§"><a href="#äº‹åŠ¡çš„ç‰¹æ€§" class="headerlink" title="äº‹åŠ¡çš„ç‰¹æ€§"></a>äº‹åŠ¡çš„ç‰¹æ€§</h3><ul><li><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰</strong>ï¼šäº‹åŠ¡æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œç”±ä¸€ç³»åˆ—åŠ¨ä½œç»„æˆã€‚äº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨ã€‚</li><li><strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</strong>ï¼šä¸€æ—¦äº‹åŠ¡å®Œæˆï¼ˆä¸ç®¡æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼‰ï¼Œç³»ç»Ÿå¿…é¡»ç¡®ä¿å®ƒæ‰€å»ºæ¨¡çš„ä¸šåŠ¡å¤„äºä¸€è‡´çš„çŠ¶æ€ï¼Œè€Œä¸ä¼šæ˜¯éƒ¨åˆ†å®Œæˆéƒ¨åˆ†å¤±è´¥ã€‚åœ¨ç°å®ä¸­çš„æ•°æ®ä¸åº”è¯¥è¢«ç ´åã€‚</li><li><strong>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</strong>ï¼šå¯èƒ½æœ‰è®¸å¤šäº‹åŠ¡ä¼šåŒæ—¶å¤„ç†ç›¸åŒçš„æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªäº‹åŠ¡éƒ½åº”è¯¥ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»å¼€æ¥ï¼Œé˜²æ­¢æ•°æ®æŸåã€‚</li><li><strong>æŒä¹…æ€§ï¼ˆDurabilityï¼‰</strong>ï¼šä¸€æ—¦äº‹åŠ¡å®Œæˆï¼Œæ— è®ºå‘ç”Ÿä»€ä¹ˆç³»ç»Ÿé”™è¯¯ï¼Œå®ƒçš„ç»“æœéƒ½ä¸åº”è¯¥å—åˆ°å½±å“ï¼Œè¿™æ ·å°±èƒ½ä»ä»»ä½•ç³»ç»Ÿå´©æºƒä¸­æ¢å¤è¿‡æ¥ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œäº‹åŠ¡çš„ç»“æœè¢«å†™åˆ°æŒä¹…åŒ–å­˜å‚¨å™¨ä¸­ã€‚</li></ul><h3 id="Springäº‹åŠ¡çš„é…ç½®æ–¹å¼"><a href="#Springäº‹åŠ¡çš„é…ç½®æ–¹å¼" class="headerlink" title="Springäº‹åŠ¡çš„é…ç½®æ–¹å¼"></a>Springäº‹åŠ¡çš„é…ç½®æ–¹å¼</h3><p>Springæ”¯æŒç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ä»¥åŠå£°æ˜å¼äº‹åŠ¡ç®¡ç†ä¸¤ç§æ–¹å¼ã€‚</p><h4 id="1-ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†"><a href="#1-ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="1. ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†"></a>1. ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†</h4><p>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†æ˜¯ä¾µå…¥æ€§äº‹åŠ¡ç®¡ç†ï¼Œä½¿ç”¨TransactionTemplateæˆ–è€…ç›´æ¥ä½¿ç”¨PlatformTransactionManagerï¼Œå¯¹äºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼ŒSpringæ¨èä½¿ç”¨TransactionTemplateã€‚</p><h4 id="2-å£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#2-å£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="2. å£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>2. å£°æ˜å¼äº‹åŠ¡ç®¡ç†</h4><p>â€‹        å£°æ˜å¼äº‹åŠ¡ç®¡ç†å»ºç«‹åœ¨AOPä¹‹ä¸Šï¼Œå…¶æœ¬è´¨æ˜¯å¯¹æ–¹æ³•å‰åè¿›è¡Œæ‹¦æˆªï¼Œç„¶ååœ¨ç›®æ ‡æ–¹æ³•å¼€å§‹ä¹‹å‰åˆ›å»ºæˆ–è€…åŠ å…¥ä¸€ä¸ªäº‹åŠ¡ï¼Œæ‰§è¡Œå®Œç›®æ ‡æ–¹æ³•ä¹‹åæ ¹æ®æ‰§è¡Œçš„æƒ…å†µæäº¤æˆ–è€…å›æ»šã€‚<br>â€‹        ç¼–ç¨‹å¼äº‹åŠ¡æ¯æ¬¡å®ç°éƒ½è¦å•ç‹¬å®ç°ï¼Œä½†ä¸šåŠ¡é‡å¤§åŠŸèƒ½å¤æ‚æ—¶ï¼Œä½¿ç”¨ç¼–ç¨‹å¼äº‹åŠ¡æ— ç–‘æ˜¯ç—›è‹¦çš„ï¼Œè€Œå£°æ˜å¼äº‹åŠ¡ä¸åŒï¼Œå£°æ˜å¼äº‹åŠ¡å±äºæ— ä¾µå…¥å¼ï¼Œä¸ä¼šå½±å“ä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åšç›¸å…³çš„äº‹åŠ¡è§„åˆ™å£°æ˜æˆ–è€…é€šè¿‡æ³¨è§£çš„æ–¹å¼ï¼Œä¾¿å¯ä»¥å°†äº‹åŠ¡è§„åˆ™åº”ç”¨åˆ°ä¸šåŠ¡é€»è¾‘ä¸­ã€‚<br>â€‹        æ˜¾ç„¶å£°æ˜å¼äº‹åŠ¡ç®¡ç†è¦ä¼˜äºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œè¿™æ­£æ˜¯Springå€¡å¯¼çš„éä¾µå…¥å¼çš„ç¼–ç¨‹æ–¹å¼ã€‚å”¯ä¸€ä¸è¶³çš„åœ°æ–¹å°±æ˜¯å£°æ˜å¼äº‹åŠ¡ç®¡ç†çš„ç²’åº¦æ˜¯æ–¹æ³•çº§åˆ«ï¼Œè€Œç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†æ˜¯å¯ä»¥åˆ°ä»£ç å—çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æå–æ–¹æ³•çš„æ–¹å¼å®Œæˆå£°æ˜å¼äº‹åŠ¡ç®¡ç†çš„é…ç½®ã€‚</p><h3 id="äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶"><a href="#äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶" class="headerlink" title="äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶"></a>äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶</h3><p>â€‹        äº‹åŠ¡çš„ä¼ æ’­æ€§ä¸€èˆ¬ç”¨åœ¨äº‹åŠ¡åµŒå¥—çš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•é‡Œé¢è°ƒç”¨äº†å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•ï¼Œé‚£ä¹ˆä¸¤ä¸ªæ–¹æ³•æ˜¯å„è‡ªä½œä¸ºç‹¬ç«‹çš„æ–¹æ³•æäº¤è¿˜æ˜¯å†…å±‚çš„äº‹åŠ¡åˆå¹¶åˆ°å¤–å±‚çš„äº‹åŠ¡ä¸€èµ·æäº¤ï¼Œè¿™å°±æ˜¯éœ€è¦äº‹åŠ¡ä¼ æ’­æœºåˆ¶çš„é…ç½®æ¥ç¡®å®šæ€ä¹ˆæ ·æ‰§è¡Œã€‚<br>å¸¸ç”¨çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶å¦‚ä¸‹ï¼š</p><ul><li>PROPAGATION_REQUIRED<br>Springé»˜è®¤çš„ä¼ æ’­æœºåˆ¶ï¼Œèƒ½æ»¡è¶³ç»å¤§éƒ¨åˆ†ä¸šåŠ¡éœ€æ±‚ï¼Œå¦‚æœå¤–å±‚æœ‰äº‹åŠ¡ï¼Œåˆ™å½“å‰äº‹åŠ¡åŠ å…¥åˆ°å¤–å±‚äº‹åŠ¡ï¼Œä¸€å—æäº¤ï¼Œä¸€å—å›æ»šã€‚å¦‚æœå¤–å±‚æ²¡æœ‰äº‹åŠ¡ï¼Œæ–°å»ºä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œ</li><li>PROPAGATION_REQUES_NEW<br>è¯¥äº‹åŠ¡ä¼ æ’­æœºåˆ¶æ˜¯æ¯æ¬¡éƒ½ä¼šæ–°å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼ŒåŒæ—¶æŠŠå¤–å±‚äº‹åŠ¡æŒ‚èµ·ï¼Œå½“å½“å‰äº‹åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ¢å¤ä¸Šå±‚äº‹åŠ¡çš„æ‰§è¡Œã€‚å¦‚æœå¤–å±‚æ²¡æœ‰äº‹åŠ¡ï¼Œæ‰§è¡Œå½“å‰æ–°å¼€å¯çš„äº‹åŠ¡å³å¯</li><li>PROPAGATION_SUPPORT<br>å¦‚æœå¤–å±‚æœ‰äº‹åŠ¡ï¼Œåˆ™åŠ å…¥å¤–å±‚äº‹åŠ¡ï¼Œå¦‚æœå¤–å±‚æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™ç›´æ¥ä½¿ç”¨éäº‹åŠ¡æ–¹å¼æ‰§è¡Œã€‚å®Œå…¨ä¾èµ–å¤–å±‚çš„äº‹åŠ¡</li><li>PROPAGATION_NOT_SUPPORT<br>è¯¥ä¼ æ’­æœºåˆ¶ä¸æ”¯æŒäº‹åŠ¡ï¼Œå¦‚æœå¤–å±‚å­˜åœ¨äº‹åŠ¡åˆ™æŒ‚èµ·ï¼Œæ‰§è¡Œå®Œå½“å‰ä»£ç ï¼Œåˆ™æ¢å¤å¤–å±‚äº‹åŠ¡ï¼Œæ— è®ºæ˜¯å¦å¼‚å¸¸éƒ½ä¸ä¼šå›æ»šå½“å‰çš„ä»£ç </li><li>PROPAGATION_NEVER<br>è¯¥ä¼ æ’­æœºåˆ¶ä¸æ”¯æŒå¤–å±‚äº‹åŠ¡ï¼Œå³å¦‚æœå¤–å±‚æœ‰äº‹åŠ¡å°±æŠ›å‡ºå¼‚å¸¸</li><li>PROPAGATION_MANDATORY<br>ä¸NEVERç›¸åï¼Œå¦‚æœå¤–å±‚æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</li><li>PROPAGATION_NESTED<br>è¯¥ä¼ æ’­æœºåˆ¶çš„ç‰¹ç‚¹æ˜¯å¯ä»¥ä¿å­˜çŠ¶æ€ä¿å­˜ç‚¹ï¼Œå½“å‰äº‹åŠ¡å›æ»šåˆ°æŸä¸€ä¸ªç‚¹ï¼Œä»è€Œé¿å…æ‰€æœ‰çš„åµŒå¥—äº‹åŠ¡éƒ½å›æ»šï¼Œå³å„è‡ªå›æ»šå„è‡ªçš„ï¼Œå¦‚æœå­äº‹åŠ¡æ²¡æœ‰æŠŠå¼‚å¸¸åƒæ‰ï¼ŒåŸºæœ¬è¿˜æ˜¯ä¼šå¼•èµ·å…¨éƒ¨å›æ»šçš„ã€‚</li></ul><h3 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h3><h4 id="äº‹åŠ¡å¹¶å‘å¼•èµ·çš„ä¸‰ç§æƒ…å†µ"><a href="#äº‹åŠ¡å¹¶å‘å¼•èµ·çš„ä¸‰ç§æƒ…å†µ" class="headerlink" title="äº‹åŠ¡å¹¶å‘å¼•èµ·çš„ä¸‰ç§æƒ…å†µ"></a>äº‹åŠ¡å¹¶å‘å¼•èµ·çš„ä¸‰ç§æƒ…å†µ</h4><p><strong>è„è¯»ï¼ˆDirty Reads ï¼‰</strong><br>        ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨å¯¹æ•°æ®è¿›è¡Œæ›´æ–°æ“ä½œï¼Œä½†æ˜¯æ›´æ–°è¿˜æœªæäº¤ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡è¿™æ—¶ä¹Ÿæ¥æ“ä½œè¿™ç»„æ•°æ®ï¼Œå¹¶ä¸”è¯»å–äº†å‰ä¸€ä¸ªäº‹åŠ¡è¿˜æœªæäº¤çš„æ•°æ®ï¼Œè€Œå‰ä¸€ä¸ªäº‹åŠ¡å¦‚æœæ“ä½œå¤±è´¥è¿›è¡Œäº†å›æ»šï¼Œåä¸€ä¸ªäº‹åŠ¡è¯»å–çš„å°±æ˜¯é”™è¯¯æ•°æ®ï¼Œè¿™æ ·å°±é€ æˆäº†è„è¯»ã€‚</p><p><strong>ä¸å¯é‡å¤è¯»ï¼ˆNon-Repeatable Reads ï¼‰</strong><br>        ä¸€ä¸ªäº‹åŠ¡å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œåœ¨è¯¥äº‹åŠ¡è¿˜æœªç»“æŸæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿå¯¹è¯¥æ•°æ®è¿›è¡Œäº†æ“ä½œï¼Œè€Œä¸”åœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸¤æ¬¡æ¬¡è¯»å–ä¹‹é—´ï¼Œç¬¬äºŒä¸ªäº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œäº†æ›´æ–°ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªäº‹åŠ¡å‰åä¸¤æ¬¡è¯»å–åˆ°çš„æ•°æ®æ˜¯ä¸åŒçš„ï¼Œè¿™æ ·å°±é€ æˆäº†ä¸å¯é‡å¤è¯»ã€‚</p><p><strong>å¹»è¯»ï¼ˆPhantom Reads ï¼‰</strong><br>ç¬¬ä¸€ä¸ªæ•°æ®æ­£åœ¨æŸ¥è¯¢ç¬¦åˆæŸä¸€æ¡ä»¶çš„æ•°æ®ï¼Œè¿™æ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡åˆæ’å…¥äº†ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡åœ¨ç¬¬äºŒæ¬¡æŸ¥è¯¢ç¬¦åˆåŒä¸€æ¡ä»¶çš„æ•°æ®æ—¶ï¼Œå‘ç°å¤šäº†ä¸€æ¡å‰ä¸€æ¬¡æŸ¥è¯¢æ—¶æ²¡æœ‰çš„æ•°æ®ï¼Œä»¿ä½›å¹»è§‰ä¸€æ ·ï¼Œè¿™å°±æ˜¯å¹»åƒè¯»ã€‚</p><h4 id="éš”ç¦»çº§åˆ«"><a href="#éš”ç¦»çº§åˆ«" class="headerlink" title="éš”ç¦»çº§åˆ«"></a><strong>éš”ç¦»çº§åˆ«</strong></h4><p><strong>DEFAULT ï¼ˆé»˜è®¤ï¼‰</strong><br>è¿™æ˜¯ä¸€ä¸ªPlatfromTransactionManageré»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼Œä½¿ç”¨æ•°æ®åº“é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚å¦å¤–å››ä¸ªä¸JDBCçš„éš”ç¦»çº§åˆ«ç›¸å¯¹åº”ã€‚</p><p> <strong>READ_UNCOMMITTED ï¼ˆè¯»æœªæäº¤ï¼‰</strong><br>è¿™æ˜¯äº‹åŠ¡æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå®ƒå…è®¸å¦å¤–ä¸€ä¸ªäº‹åŠ¡å¯ä»¥çœ‹åˆ°è¿™ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚è¿™ç§éš”ç¦»çº§åˆ«ä¼šäº§ç”Ÿè„è¯»ï¼Œä¸å¯é‡å¤è¯»å’Œå¹»åƒè¯»ã€‚ </p><p><strong>READ_COMMITTED ï¼ˆè¯»å·²æäº¤ï¼‰</strong><br>ä¿è¯ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹çš„æ•°æ®æäº¤åæ‰èƒ½è¢«å¦å¤–ä¸€ä¸ªäº‹åŠ¡è¯»å–ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¸èƒ½è¯»å–è¯¥äº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚è¿™ç§äº‹åŠ¡éš”ç¦»çº§åˆ«å¯ä»¥é¿å…è„è¯»å‡ºç°ï¼Œä½†æ˜¯å¯èƒ½ä¼šå‡ºç°ä¸å¯é‡å¤è¯»å’Œå¹»åƒè¯»ã€‚ </p><p><strong>REPEATABLE_READ ï¼ˆå¯é‡å¤è¯»ï¼‰</strong><br>è¿™ç§äº‹åŠ¡éš”ç¦»çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼Œä½†æ˜¯å¯èƒ½å‡ºç°å¹»åƒè¯»ã€‚å®ƒé™¤äº†ä¿è¯ä¸€ä¸ªäº‹åŠ¡ä¸èƒ½è¯»å–å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®å¤–ï¼Œè¿˜ä¿è¯äº†ä¸å¯é‡å¤è¯»ã€‚</p><p><strong>SERIALIZABLEï¼ˆä¸²è¡ŒåŒ–ï¼‰</strong><br>è¿™æ˜¯èŠ±è´¹æœ€é«˜ä»£ä»·ä½†æ˜¯æœ€å¯é çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œäº‹åŠ¡è¢«å¤„ç†ä¸ºé¡ºåºæ‰§è¡Œã€‚é™¤äº†é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»å¤–ï¼Œè¿˜é¿å…äº†å¹»åƒè¯»ã€‚ </p><h4 id="éš”ç¦»çº§åˆ«è§£å†³äº‹åŠ¡å¹¶è¡Œå¼•èµ·çš„é—®é¢˜"><a href="#éš”ç¦»çº§åˆ«è§£å†³äº‹åŠ¡å¹¶è¡Œå¼•èµ·çš„é—®é¢˜" class="headerlink" title="éš”ç¦»çº§åˆ«è§£å†³äº‹åŠ¡å¹¶è¡Œå¼•èµ·çš„é—®é¢˜"></a><strong>éš”ç¦»çº§åˆ«è§£å†³äº‹åŠ¡å¹¶è¡Œå¼•èµ·çš„é—®é¢˜</strong></h4><img src="/2021/05/08/spring-yi-shi-wu/äº‹åŠ¡éš”ç¦»çº§åˆ«.png" width="70%" height="70%"><hr><img src="/2021/05/08/spring-yi-shi-wu/0.jpg" width="70%" height="70%">]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹  </tag>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="2021/05/06/hello-world/"/>
      <url>2021/05/06/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
